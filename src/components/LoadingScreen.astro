---
// LoadingScreen.astro - Musical note loading animation
// Displays while the page content loads, then fades out smoothly
---

<div id="loading-screen" class="loading-screen">
  <div class="loader-container">
    <!-- Spinning circle path -->
    <div class="spinning-circle"></div>
    <!-- Musical note in the center -->
    <div class="musical-note">â™ª</div>
  </div>
  <p class="loading-text">Loading...</p>
</div>

<style>
  .loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
  }

  .loading-screen.hidden {
    opacity: 0;
    visibility: hidden;
  }

  .loader-container {
    position: relative;
    width: 120px;
    height: 120px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* The spinning circle around the note */
  .spinning-circle {
    position: absolute;
    width: 100%;
    height: 100%;
    border: 3px solid transparent;
    border-top: 3px solid #60a5fa;
    border-right: 3px solid #a78bfa;
    border-radius: 50%;
    animation: spin 1.2s linear infinite;
  }

  .spinning-circle::before {
    content: '';
    position: absolute;
    top: 5px;
    left: 5px;
    right: 5px;
    bottom: 5px;
    border: 2px solid transparent;
    border-bottom: 2px solid #f59e0b;
    border-left: 2px solid #34d399;
    border-radius: 50%;
    animation: spin 0.8s linear infinite reverse;
  }

  /* The musical note */
  .musical-note {
    font-size: 3rem;
    color: #f1f5f9;
    animation: pulse 1.5s ease-in-out infinite, float 2s ease-in-out infinite;
    text-shadow: 
      0 0 20px rgba(96, 165, 250, 0.5),
      0 0 40px rgba(167, 139, 250, 0.3);
  }

  .loading-text {
    margin-top: 1.5rem;
    color: #94a3b8;
    font-size: 0.9rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    animation: fade-pulse 1.5s ease-in-out infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }

  @keyframes fade-pulse {
    0%, 100% {
      opacity: 0.5;
    }
    50% {
      opacity: 1;
    }
  }
</style>

<script>
  // Hide loading screen when page is fully loaded
  window.addEventListener('load', () => {
    const loadingScreen = document.getElementById('loading-screen');
    if (loadingScreen) {
      // Small delay for smoother transition
      setTimeout(() => {
        loadingScreen.classList.add('hidden');
        // Remove from DOM after animation completes
        setTimeout(() => {
          loadingScreen.remove();
        }, 500);
      }, 300);
    }
  });

  // Fallback: hide after 5 seconds max (in case of slow resources)
  setTimeout(() => {
    const loadingScreen = document.getElementById('loading-screen');
    if (loadingScreen && !loadingScreen.classList.contains('hidden')) {
      loadingScreen.classList.add('hidden');
      setTimeout(() => {
        loadingScreen.remove();
      }, 500);
    }
  }, 5000);
</script>
