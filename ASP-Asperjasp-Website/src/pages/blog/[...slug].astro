---
import { getCollection, type CollectionEntry } from "astro:content";

// 1. Exporta getStaticPaths para generar las rutas de los posts
export async function getStaticPaths() {
  const posts = await getCollection("blog");

  return posts.map((post) => {
    // En lugar de dividir, usamos el ID completo como un solo segmento
    // Lo importante es que sea una cadena, no un array
    const slugString = post.id;

    return {
      params: { slug: slugString },
      props: { post },
    };
  });
}

// 2. Recibe el post desde props
const { post } = Astro.props as { post: CollectionEntry<"blog"> };

// Para depuraci√≥n
console.log("Slug recibido:", Astro.params.slug);
console.log("Post ID:", post.id);
---

<article class="max-w-3xl mx-auto py-10 px-4">
  <h1 class="text-4xl font-bold mb-4">{post.data.title}</h1>
  <p class="text-gray-400 mb-8">{post.data.pubDate}</p>
  <div set:html={post.body} />
</article>
